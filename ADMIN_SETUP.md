# 🔐 管理员账号创建和后台测试指南

## 📋 创建管理员账号

### 方法1：注册后升级为管理员（推荐）

这是最安全和完整的方法：

1. **注册新账号**
   - 访问 `http://localhost:3000/register`
   - 使用您的邮箱注册一个新账号
   - 记住您使用的邮箱地址

2. **在 Supabase 中升级为管理员**
   - 登录 Supabase 控制台
   - 打开 SQL 编辑器
   - 执行以下 SQL（替换邮箱地址）：

```sql
UPDATE users 
SET 
    role = 'admin',
    status = 'active',
    email_verified = true,
    updated_at = NOW()
WHERE email = 'your-email@example.com';  -- 替换为您的邮箱
```

3. **验证升级成功**
```sql
SELECT id, email, name, role, status FROM users WHERE role = 'admin';
```

### 方法2：使用预设管理员账号

如果您已经执行了 `database/seed.sql`，系统中已经有一个预设的管理员账号：

- **邮箱**: `admin@aitools.com`
- **角色**: `admin`
- **状态**: `active`

但是这个账号无法直接登录，因为 Supabase Auth 中没有对应的认证记录。

### 方法3：快速创建测试管理员

执行 `scripts/create-admin.sql` 脚本：

```sql
-- 复制 scripts/create-admin.sql 的内容到 Supabase SQL 编辑器执行
```

## 🚀 登录管理员账号

1. **访问登录页面**
   ```
   http://localhost:3000/login
   ```

2. **使用您的管理员邮箱和密码登录**

3. **验证登录成功**
   - 登录后应该跳转到首页
   - 检查右上角用户菜单，应该显示您的用户名

## 🛠️ 测试管理后台

### 1. 访问管理后台

登录后访问：
```
http://localhost:3000/admin
```

如果权限正确，您应该看到管理员仪表板。

### 2. 测试各个管理功能

#### 📊 仪表板 (`/admin`)
- 查看系统统计数据
- 查看待审核工具
- 查看热门工具
- 查看最新用户

#### 👥 用户管理 (`/admin/users`)
- 查看用户列表
- 搜索和筛选用户
- 修改用户状态和角色
- 批量操作用户

#### 🛠️ 工具管理 (`/admin/tools`)
- 查看所有工具
- 编辑工具信息
- 审核待提交的工具
- 管理工具状态

#### 🏷️ 分类管理 (`/admin/categories`)
- 查看和编辑分类
- 创建新分类
- 调整分类顺序
- 设置分类状态

#### 📝 审核中心 (`/admin/audit`)
- 审核用户提交的工具
- 批准或拒绝提交
- 查看审核历史
- 管理审核队列

#### ⚙️ 系统设置 (`/admin/settings`)
- 修改网站基本信息
- 配置功能开关
- 设置审核规则
- 管理通知设置

#### 📈 数据分析 (`/admin/analytics`)
- 查看访问统计
- 分析用户行为
- 工具使用情况
- 增长趋势分析

## 🔍 权限验证测试

### 测试管理员权限
1. 确保可以访问所有 `/admin/*` 页面
2. 确保可以执行管理操作（编辑、删除、审核等）
3. 确保可以查看敏感数据

### 测试普通用户权限
1. 创建一个普通用户账号
2. 尝试访问 `/admin` 页面
3. 应该被重定向到首页或显示权限不足

### 测试未登录用户
1. 退出登录
2. 尝试访问 `/admin` 页面
3. 应该被重定向到登录页面

## 🐛 常见问题排查

### 问题1：无法访问管理后台
**症状**: 访问 `/admin` 时显示"权限不足"或重定向到首页

**解决方案**:
1. 检查用户是否已登录
2. 在数据库中确认用户角色是否为 `admin`
3. 清除浏览器缓存和 localStorage
4. 重新登录

### 问题2：登录后角色没有更新
**症状**: 修改数据库中的角色后，登录用户仍然是普通用户

**解决方案**:
1. 退出登录并重新登录
2. 检查 `useAuth` hook 是否正确加载用户资料
3. 确认数据库更新是否成功

### 问题3：管理页面显示空白或错误
**症状**: 管理页面加载失败或显示错误

**解决方案**:
1. 检查浏览器控制台的错误信息
2. 确认数据库连接正常
3. 检查 API 调用是否成功

## 📝 测试清单

完成以下测试项目：

- [ ] 成功创建管理员账号
- [ ] 管理员可以登录
- [ ] 可以访问管理后台首页
- [ ] 用户管理功能正常
- [ ] 工具管理功能正常
- [ ] 分类管理功能正常
- [ ] 审核功能正常
- [ ] 系统设置功能正常
- [ ] 普通用户无法访问管理后台
- [ ] 未登录用户被重定向到登录页

## 🎯 下一步

管理员账号创建成功后，您可以：

1. **配置系统设置**: 修改网站名称、描述等基本信息
2. **管理分类**: 添加或修改工具分类
3. **审核工具**: 处理用户提交的工具
4. **用户管理**: 管理注册用户和权限
5. **数据分析**: 查看网站使用情况和统计数据

---

如有任何问题，请检查浏览器控制台的错误信息或联系技术支持。
